{
    "info": {
        "_postman_id": "neuro-auth-v2-2025-fase2",
        "name": "Neuroefficiency Auth API v2.0",
        "description": "Collection completa do sistema de autentica√ß√£o Neuroefficiency com Recupera√ß√£o de Senha.\n\n**Vers√£o:** 2.0 (Fase 1 + Fase 2 Completas)\n**Status:**  100%% Completa e Funcional\n**Endpoints:** 9/9 (100%%)\n**√öltima Atualiza√ß√£o:** 14/10/2025\n\n**Fase 1 - Autentica√ß√£o (1-5):**\n-  Health Check\n-  Register (com email)\n-  Login\n-  Me\n-  Logout\n\n**Fase 2 - Recupera√ß√£o de Senha (6-9):**\n-  Password Reset Request\n-  Validate Token\n-  Confirm Reset\n-  Password Reset Health\n\n**Seguran√ßa:**\n- BCrypt for√ßa 12 (senhas)\n- SHA-256 (tokens reset)\n- Rate limiting (3/hora)\n- Anti-enumera√ß√£o\n- Auditoria LGPD",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "1. Health Check",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "// Testes automatizados",
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Response has correct structure\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('status');",
                            "    pm.expect(jsonData).to.have.property('service');",
                            "    pm.expect(jsonData).to.have.property('version');",
                            "});",
                            "",
                            "pm.test(\"Service is UP\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.status).to.eql(\"UP\");",
                            "    pm.expect(jsonData.service).to.eql(\"Authentication Service\");",
                            "});",
                            "",
                            "console.log(\"‚úÖ Health Check: Sistema operacional\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{baseUrl}}/api/auth/health",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "health"
                    ]
                },
                "description": "Verifica se o servi√ßo de autentica√ß√£o est√° dispon√≠vel e operacional.\n\n**Endpoint:** `GET /api/auth/health`\n\n**Status:** ‚úÖ 100% Funcional\n\n**Acesso:** P√∫blico (n√£o requer autentica√ß√£o)\n\n**Resposta Esperada:**\n```json\n{\n  \"status\": \"UP\",\n  \"service\": \"Authentication Service\",\n  \"version\": \"1.0\"\n}\n```\n\n**Use Case:** Monitoramento de disponibilidade do servi√ßo."
            },
            "response": []
        },
        {
            "name": "2. Register - Novo Usu√°rio",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "// Testes automatizados",
                            "pm.test(\"Status code is 201 Created\", function () {",
                            "    pm.response.to.have.status(201);",
                            "});",
                            "",
                            "pm.test(\"Response has correct structure\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('message');",
                            "    pm.expect(jsonData).to.have.property('user');",
                            "    pm.expect(jsonData.user).to.have.property('id');",
                            "    pm.expect(jsonData.user).to.have.property('username');",
                            "    pm.expect(jsonData.user).to.have.property('enabled');",
                            "});",
                            "",
                            "pm.test(\"Registration successful\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.message).to.include(\"sucesso\");",
                            "    pm.expect(jsonData.user.enabled).to.be.true;",
                            "});",
                            "",
                            "pm.test(\"User data is correct\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    var requestBody = JSON.parse(pm.request.body.raw);",
                            "    pm.expect(jsonData.user.username).to.eql(requestBody.username);",
                            "});",
                            "",
                            "// Salvar dados do usu√°rio para pr√≥ximos testes",
                            "if (pm.response.code === 201) {",
                            "    var jsonData = pm.response.json();",
                            "    pm.collectionVariables.set(\"userId\", jsonData.user.id);",
                            "    pm.collectionVariables.set(\"username\", jsonData.user.username);",
                            "    console.log(\"‚úÖ Register: Usu√°rio criado - ID: \" + jsonData.user.id);",
                            "}"
                        ],
                        "type": "text/javascript"
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "exec": [
                            "// Gerar username √∫nico para evitar duplica√ß√£o",
                            "var timestamp = new Date().getTime();",
                            "var username = \"testuser\" + timestamp;",
                            "pm.collectionVariables.set(\"testUsername\", username);",
                            "console.log(\"üìù Username gerado: \" + username);"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"username\": \"{{testUsername}}\",\n  \"email\": \"{{testUsername}}@example.com\",\n  \"password\": \"Test@1234\",\n  \"confirmPassword\": \"Test@1234\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/api/auth/register",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "register"
                    ]
                },
                "description": "Registra um novo usu√°rio no sistema.\n\n**Endpoint:** `POST /api/auth/register`\n\n**Status:** ‚úÖ 100% Funcional\n\n**Acesso:** P√∫blico\n\n**Body (JSON):**\n```json\n{\n  \"username\": \"testuser\",\n  \"password\": \"Test@1234\",\n  \"confirmPassword\": \"Test@1234\"\n}\n```\n\n**Valida√ß√µes:**\n- ‚úÖ Username √∫nico (3-50 caracteres)\n- ‚úÖ Senha forte (8-100 caracteres):\n  - Pelo menos 1 mai√∫scula\n  - Pelo menos 1 min√∫scula\n  - Pelo menos 1 n√∫mero\n  - Pelo menos 1 caractere especial\n- ‚úÖ Confirma√ß√£o de senha obrigat√≥ria\n- ‚úÖ Senhas devem coincidir\n\n**Seguran√ßa:**\n- BCrypt for√ßa 12 para hash de senha\n- Username sanitizado para logs\n\n**Resposta Sucesso (201):**\n```json\n{\n  \"message\": \"Usu√°rio registrado com sucesso\",\n  \"user\": {\n    \"id\": 1,\n    \"username\": \"testuser\",\n    \"enabled\": true,\n    \"createdAt\": \"2025-10-12T03:16:09.222884\",\n    \"updatedAt\": \"2025-10-12T03:16:09.222884\"\n  }\n}\n```\n\n**Erros Comuns:**\n- 400: Username j√° existe\n- 400: Senhas n√£o coincidem\n- 400: Senha fraca"
            },
            "response": []
        },
        {
            "name": "3. Login - Autentica√ß√£o",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "// Testes automatizados",
                            "pm.test(\"Status code is 200 OK\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Response has correct structure\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('message');",
                            "    pm.expect(jsonData).to.have.property('user');",
                            "    pm.expect(jsonData).to.have.property('sessionId');",
                            "    pm.expect(jsonData.user).to.have.property('id');",
                            "    pm.expect(jsonData.user).to.have.property('username');",
                            "});",
                            "",
                            "pm.test(\"Login successful\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.message).to.include(\"sucesso\");",
                            "    pm.expect(jsonData.user.enabled).to.be.true;",
                            "    pm.expect(jsonData.sessionId).to.exist;",
                            "});",
                            "",
                            "pm.test(\"Session cookie present\", function () {",
                            "    pm.expect(pm.cookies.has('JSESSIONID')).to.be.true;",
                            "});",
                            "",
                            "pm.test(\"User authenticated correctly\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    var requestBody = JSON.parse(pm.request.body.raw);",
                            "    pm.expect(jsonData.user.username).to.eql(requestBody.username);",
                            "});",
                            "",
                            "// Salvar sessionId para refer√™ncia",
                            "if (pm.response.code === 200) {",
                            "    var jsonData = pm.response.json();",
                            "    pm.collectionVariables.set(\"sessionId\", jsonData.sessionId);",
                            "    console.log(\"‚úÖ Login: Autentica√ß√£o bem-sucedida\");",
                            "    console.log(\"üîë SessionId: \" + jsonData.sessionId);",
                            "}"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"username\": \"{{testUsername}}\",\n  \"password\": \"Test@1234\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/api/auth/login",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "login"
                    ]
                },
                "description": "Autentica um usu√°rio no sistema e cria sess√£o HTTP.\n\n**Endpoint:** `POST /api/auth/login`\n\n**Status:** ‚úÖ 100% Funcional\n\n**Acesso:** P√∫blico\n\n**Body (JSON):**\n```json\n{\n  \"username\": \"testuser\",\n  \"password\": \"Test@1234\"\n}\n```\n\n**Seguran√ßa:**\n- ‚úÖ Valida√ß√£o de senha via BCrypt\n- ‚úÖ Spring Security AuthenticationManager\n- ‚úÖ SecurityContext criado e persistido na sess√£o\n- ‚úÖ Cookie JSESSIONID seguro\n\n**Resposta Sucesso (200):**\n```json\n{\n  \"message\": \"Login realizado com sucesso\",\n  \"sessionId\": \"96C2E33AAFAA927E86AEBD0B9F0AF24A\",\n  \"user\": {\n    \"id\": 1,\n    \"username\": \"testuser\",\n    \"enabled\": true,\n    \"createdAt\": \"2025-10-12T03:16:09.222884\",\n    \"updatedAt\": \"2025-10-12T03:16:09.222884\"\n  }\n}\n```\n\n**Cookies:**\n- `JSESSIONID`: Cookie de sess√£o HTTP (gerenciado pelo Postman)\n\n**Erros Comuns:**\n- 401: Credenciais inv√°lidas (username ou senha incorretos)\n- 401: Usu√°rio n√£o encontrado\n\n**Importante:** O cookie JSESSIONID √© gerenciado automaticamente pelo Postman e ser√° usado nos pr√≥ximos endpoints."
            },
            "response": []
        },
        {
            "name": "4. Me - Usu√°rio Atual",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "// Testes automatizados",
                            "pm.test(\"Status code is 200 OK\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Response has correct structure\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('id');",
                            "    pm.expect(jsonData).to.have.property('username');",
                            "    pm.expect(jsonData).to.have.property('enabled');",
                            "    pm.expect(jsonData).to.have.property('createdAt');",
                            "    pm.expect(jsonData).to.have.property('updatedAt');",
                            "});",
                            "",
                            "pm.test(\"User is authenticated\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.enabled).to.be.true;",
                            "    pm.expect(jsonData.id).to.exist;",
                            "});",
                            "",
                            "pm.test(\"Session persisted correctly\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    var envUsername = pm.collectionVariables.get(\"username\");",
                            "    var envUserId = pm.collectionVariables.get(\"userId\");",
                            "    ",
                            "    if (envUsername) {",
                            "        pm.expect(jsonData.username).to.eql(envUsername);",
                            "    }",
                            "    if (envUserId) {",
                            "        pm.expect(jsonData.id).to.eql(parseInt(envUserId));",
                            "    }",
                            "});",
                            "",
                            "console.log(\"‚úÖ Me: Dados do usu√°rio autenticado recuperados\");",
                            "var jsonData = pm.response.json();",
                            "console.log(\"üë§ Usu√°rio: \" + jsonData.username);",
                            "console.log(\"üÜî ID: \" + jsonData.id);"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{baseUrl}}/api/auth/me",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "me"
                    ]
                },
                "description": "Retorna dados do usu√°rio atualmente autenticado.\n\n**Endpoint:** `GET /api/auth/me`\n\n**Status:** ‚úÖ 100% Funcional (Problema de sess√£o RESOLVIDO)\n\n**Acesso:** Requer autentica√ß√£o (ap√≥s login)\n\n**Headers:**\n- Cookie: JSESSIONID (autom√°tico pelo Postman)\n\n**Pr√©-requisitos:**\n1. Usu√°rio deve ter feito login via `/api/auth/login`\n2. Cookie JSESSIONID deve estar presente\n3. Sess√£o deve estar ativa\n\n**Resposta Sucesso (200):**\n```json\n{\n  \"id\": 1,\n  \"username\": \"testuser\",\n  \"enabled\": true,\n  \"createdAt\": \"2025-10-12T03:16:09.222884\",\n  \"updatedAt\": \"2025-10-12T03:16:09.222884\"\n}\n```\n\n**Erro Comum:**\n- 403 Forbidden: Usu√°rio n√£o autenticado ou sess√£o expirada\n  - **Solu√ß√£o:** Execute o endpoint `3. Login` primeiro\n\n**Implementa√ß√£o T√©cnica:**\n- SecurityContext recuperado da sess√£o HTTP via `HttpSessionSecurityContextRepository`\n- Spring Security valida autentica√ß√£o automaticamente"
            },
            "response": []
        },
        {
            "name": "5. Logout - Encerrar Sess√£o",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "// Testes automatizados",
                            "pm.test(\"Status code is 200 OK\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Response has correct structure\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('message');",
                            "});",
                            "",
                            "pm.test(\"Logout successful\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.message).to.include(\"sucesso\");",
                            "});",
                            "",
                            "// Limpar vari√°veis da collection",
                            "pm.collectionVariables.unset(\"sessionId\");",
                            "pm.collectionVariables.unset(\"userId\");",
                            "pm.collectionVariables.unset(\"username\");",
                            "pm.collectionVariables.unset(\"testUsername\");",
                            "",
                            "console.log(\"‚úÖ Logout: Sess√£o encerrada com sucesso\");",
                            "console.log(\"üßπ Vari√°veis limpas\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [],
                "url": {
                    "raw": "{{baseUrl}}/api/auth/logout",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "logout"
                    ]
                },
                "description": "Invalida a sess√£o atual do usu√°rio.\n\n**Endpoint:** `POST /api/auth/logout`\n\n**Status:** ‚úÖ 100% Funcional (Problema de sess√£o RESOLVIDO)\n\n**Acesso:** Requer autentica√ß√£o (ap√≥s login)\n\n**Headers:**\n- Cookie: JSESSIONID (autom√°tico pelo Postman)\n\n**Pr√©-requisitos:**\n1. Usu√°rio deve estar autenticado\n2. Cookie JSESSIONID deve estar presente\n3. Sess√£o deve estar ativa\n\n**A√ß√µes Realizadas:**\n- ‚úÖ Invalida sess√£o HTTP (`session.invalidate()`)\n- ‚úÖ Remove SecurityContext\n- ‚úÖ Cookie JSESSIONID √© removido/invalidado\n\n**Resposta Sucesso (200):**\n```json\n{\n  \"message\": \"Logout realizado com sucesso\"\n}\n```\n\n**Erro Comum:**\n- 403 Forbidden: Usu√°rio n√£o autenticado ou sess√£o j√° expirada\n  - **Solu√ß√£o:** Execute o endpoint `3. Login` primeiro\n\n**Ap√≥s Logout:**\n- Cookie JSESSIONID √© invalidado\n- Tentativas de acessar `/me` retornar√£o 403\n- √â necess√°rio fazer login novamente para nova sess√£o"
            },
            "response": []
        },
        {
            "name": "Valida√ß√£o - Username Duplicado",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "// Teste de valida√ß√£o",
                            "pm.test(\"Status code is 400 Bad Request\", function () {",
                            "    pm.response.to.have.status(400);",
                            "});",
                            "",
                            "pm.test(\"Error message indicates duplicate username\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('message');",
                            "    pm.expect(jsonData.message).to.include(\"j√° est√° em uso\");",
                            "});",
                            "",
                            "console.log(\"‚úÖ Valida√ß√£o: Username duplicado detectado corretamente\");"
                        ],
                        "type": "text/javascript"
                    }
                },
                {
                    "listen": "prerequest",
                    "script": {
                        "exec": [
                            "// Reusar o mesmo username do endpoint anterior (Register)",
                            "// Este endpoint testa username duplicado, ent√£o DEVE usar o username j√° registrado",
                            "var username = pm.collectionVariables.get(\"testUsername\");",
                            "console.log(\"üìù Reusando username: \" + username + \" (deve falhar por duplica√ß√£o)\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"username\": \"{{testUsername}}\",\n  \"email\": \"{{testUsername}}@example.com\",\n  \"password\": \"Test@1234\",\n  \"confirmPassword\": \"Test@1234\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/api/auth/register",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "register"
                    ]
                },
                "description": "**TESTE DE VALIDA√á√ÉO:** Tenta registrar usu√°rio com username j√° existente.\n\n**Objetivo:** Validar que o sistema rejeita usernames duplicados.\n\n**Pr√©-requisito:** Execute `2. Register` primeiro para criar o usu√°rio.\n\n**Resposta Esperada (400):**\n```json\n{\n  \"timestamp\": \"2025-10-12T03:16:09.222Z\",\n  \"status\": 400,\n  \"error\": \"Bad Request\",\n  \"message\": \"Username 'testuser' j√° est√° em uso\",\n  \"path\": \"/api/auth/register\"\n}\n```"
            },
            "response": []
        },
        {
            "name": "Valida√ß√£o - Senha Fraca",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "// Teste de valida√ß√£o",
                            "pm.test(\"Status code is 400 Bad Request\", function () {",
                            "    pm.response.to.have.status(400);",
                            "});",
                            "",
                            "pm.test(\"Error message indicates weak password\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('message');",
                            "    // Pode ser erro de valida√ß√£o de formato",
                            "    pm.expect(jsonData.message || jsonData.errors).to.exist;",
                            "});",
                            "",
                            "console.log(\"‚úÖ Valida√ß√£o: Senha fraca detectada corretamente\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"username\": \"weakpasstest\",\n  \"email\": \"weak@example.com\",\n  \"password\": \"123\",\n  \"confirmPassword\": \"123\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/api/auth/register",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "register"
                    ]
                },
                "description": "**TESTE DE VALIDA√á√ÉO:** Tenta registrar usu√°rio com senha fraca.\n\n**Objetivo:** Validar que o sistema rejeita senhas que n√£o atendem aos requisitos de seguran√ßa.\n\n**Senha Testada:** \"123\" (muito curta, sem mai√∫sculas, sem especiais)\n\n**Requisitos de Senha:**\n- M√≠nimo 8 caracteres\n- Pelo menos 1 mai√∫scula\n- Pelo menos 1 min√∫scula\n- Pelo menos 1 n√∫mero\n- Pelo menos 1 caractere especial\n\n**Resposta Esperada (400):**\n```json\n{\n  \"timestamp\": \"2025-10-12T03:16:09.222Z\",\n  \"status\": 400,\n  \"error\": \"Bad Request\",\n  \"message\": \"Password deve ter entre 8 e 100 caracteres\",\n  \"path\": \"/api/auth/register\"\n}\n```"
            },
            "response": []
        },
        {
            "name": "Valida√ß√£o - Credenciais Inv√°lidas",
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "// Teste de valida√ß√£o",
                            "pm.test(\"Status code is 401 Unauthorized\", function () {",
                            "    pm.response.to.have.status(401);",
                            "});",
                            "",
                            "pm.test(\"Error message indicates bad credentials\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('message');",
                            "    pm.expect(jsonData.message.toLowerCase()).to.include(\"credenciais\");",
                            "});",
                            "",
                            "console.log(\"‚úÖ Valida√ß√£o: Credenciais inv√°lidas detectadas corretamente\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ],
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n  \"username\": \"nonexistentuser\",\n  \"password\": \"WrongPassword@123\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/api/auth/login",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "login"
                    ]
                },
                "description": "**TESTE DE VALIDA√á√ÉO:** Tenta fazer login com credenciais inv√°lidas.\n\n**Objetivo:** Validar que o sistema rejeita credenciais incorretas.\n\n**Resposta Esperada (401):**\n```json\n{\n  \"timestamp\": \"2025-10-12T03:16:09.222Z\",\n  \"status\": 401,\n  \"error\": \"Unauthorized\",\n  \"message\": \"Credenciais inv√°lidas\",\n  \"path\": \"/api/auth/login\"\n}\n```"
            },
            "response": []
        },
        {
            "name": "6. Password Reset - Request",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Accept-Language",
                        "value": "pt-BR"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"email\": \"{{testUsername}}@example.com\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/api/auth/password-reset/request",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "password-reset",
                        "request"
                    ]
                },
                "description": "Solicita reset de senha por email.\\n\\n**Requisito:** MailHog rodando em localhost:8025"
            },
            "response": [],
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Response has success field\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('success');",
                            "    pm.expect(jsonData.success).to.be.true;",
                            "});",
                            "",
                            "console.log(\"‚úÖ Reset de senha solicitado\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "7. Password Reset - Validate Token",
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{baseUrl}}/api/auth/password-reset/validate-token/TOKEN_AQUI",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "password-reset",
                        "validate-token",
                        "TOKEN_AQUI"
                    ]
                },
                "description": "Valida token de reset.\\n\\n**INSTRU√á√ïES:**\\n1. Execute endpoint 6\\n2. Abra MailHog (http://localhost:8025)\\n3. Copie o token (64 chars)\\n4. Substitua TOKEN_AQUI na URL"
            },
            "response": [],
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Token validation response\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('success');",
                            "    pm.expect(jsonData.data).to.have.property('valid');",
                            "});",
                            "",
                            "console.log(\"‚úÖ Token validado\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "8. Password Reset - Confirm",
            "request": {
                "method": "POST",
                "header": [
                    {
                        "key": "Content-Type",
                        "value": "application/json"
                    },
                    {
                        "key": "Accept-Language",
                        "value": "pt-BR"
                    }
                ],
                "body": {
                    "mode": "raw",
                    "raw": "{\n    \"token\": \"TOKEN_AQUI\",\n    \"newPassword\": \"NewPass@1234\",\n    \"confirmPassword\": \"NewPass@1234\"\n}"
                },
                "url": {
                    "raw": "{{baseUrl}}/api/auth/password-reset/confirm",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "password-reset",
                        "confirm"
                    ]
                },
                "description": "Confirma reset com nova senha.\\n\\n**INSTRU√á√ïES:**\\n1. Copie token do MailHog\\n2. Cole no campo token\\n3. Execute"
            },
            "response": [],
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Password changed successfully\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData).to.have.property('success');",
                            "    pm.expect(jsonData.success).to.be.true;",
                            "});",
                            "",
                            "console.log(\"‚úÖ Senha alterada\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        },
        {
            "name": "9. Password Reset - Health",
            "request": {
                "method": "GET",
                "header": [],
                "url": {
                    "raw": "{{baseUrl}}/api/auth/password-reset/health",
                    "host": [
                        "{{baseUrl}}"
                    ],
                    "path": [
                        "api",
                        "auth",
                        "password-reset",
                        "health"
                    ]
                },
                "description": "Health check do servi√ßo de password reset"
            },
            "response": [],
            "event": [
                {
                    "listen": "test",
                    "script": {
                        "exec": [
                            "pm.test(\"Status code is 200\", function () {",
                            "    pm.response.to.have.status(200);",
                            "});",
                            "",
                            "pm.test(\"Service is UP\", function () {",
                            "    var jsonData = pm.response.json();",
                            "    pm.expect(jsonData.success).to.be.true;",
                            "    pm.expect(jsonData.data.status).to.eql(\"UP\");",
                            "});",
                            "",
                            "console.log(\"‚úÖ Password Reset Service UP\");"
                        ],
                        "type": "text/javascript"
                    }
                }
            ]
        }
    ],
    "event": [
        {
            "listen": "prerequest",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Script global executado antes de cada requisi√ß√£o",
                    "console.log(\"üöÄ Neuroefficiency Auth API - Collection Completa\");",
                    "console.log(\"üìã Fase 1: Sistema de Autentica√ß√£o - 100% Completo\");",
                    "console.log(\"‚è∞\", new Date().toLocaleString('pt-BR'));",
                    "console.log(\"\");"
                ]
            }
        },
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "// Script global executado ap√≥s cada requisi√ß√£o",
                    "var statusCode = pm.response.code;",
                    "",
                    "if (statusCode >= 200 && statusCode < 300) {",
                    "    console.log(\"‚úÖ Requisi√ß√£o bem-sucedida: \" + statusCode);",
                    "} else if (statusCode >= 400 && statusCode < 500) {",
                    "    console.log(\"‚ö†Ô∏è Erro do cliente: \" + statusCode);",
                    "} else if (statusCode >= 500) {",
                    "    console.log(\"‚ùå Erro do servidor: \" + statusCode);",
                    "}",
                    "console.log(\"\");"
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:8082",
            "type": "string"
        },
        {
            "key": "testUsername",
            "value": "",
            "type": "string"
        },
        {
            "key": "userId",
            "value": "",
            "type": "string"
        },
        {
            "key": "username",
            "value": "",
            "type": "string"
        },
        {
            "key": "sessionId",
            "value": "",
            "type": "string"
        }
    ]
}